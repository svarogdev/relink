import{_ as k,R as w,N as g,s as P,b as N,d as R,g as z,e as D,f as O,h as f,u as U,i as E,j as K,r as L,k as M}from"./index.175c61fc.js";import{o as l,c as a,e,t as n,p as C,k as I,r as h,d as b,w as u,b as c,i as r,j as Z,a1 as q,F as y,m as T,l as V}from"./vendor.3701fcf0.js";const G={props:{comment:Object}},H=i=>(C("data-v-04e2125d"),i=i(),I(),i),J=H(()=>e("hr",null,null,-1));function Q(i,t,x,j,s,d){return l(),a("div",null,[e("h4",null,n(this.comment.username),1),e("p",null,n(this.comment.text),1),J])}var W=k(G,[["render",Q],["__scopeId","data-v-04e2125d"]]);const X={components:{RecommendedPost:w,Comment:W},data(){return{id:0,post:{},details:{},type:"",date:"",time:"Izaberite datum",commentText:"",baseAvailableTimes:["1h","2h","3h","4h","5h","6h","7h","8h","9h","10h","11h","12h","13h","14h","15h","16h","17h","18h","19h","20h","21h","22h","23h"],availableTimes:["Izaberite datum"],reservations:void 0,comments:void 0,loadingAnimation:!1,isFavorite:!1,avatar:g,image:g,store:P}},created(){this.loadingAnimation=!0,N(this.$route.params.id).then(i=>{this.post=i.obj,this.loadingAnimation=!1,R(this.post.id,this.store.id).then(t=>{this.isFavorite=t.status}),z(this.post.avatarId).then(t=>{this.avatar=t.obj}),D(this.post.post_details[0].imageId).then(t=>{this.image=t.obj}),this.store.companySide()&&O(this.post.id).then(t=>{this.reservations=t.obj}),f(this.post.id).then(t=>{this.comments=t.obj})})},computed:{postTypes(){return this.post.post_details[0].types.map(i=>i.name)}},methods:{toggleFavorite(){!this.store.isLoggedIn||(this.isFavorite?U(this.post.id,this.store.id):E(this.post.id,this.store.id),this.isFavorite=!this.isFavorite)},createComment(){K(this.post.id,this.store.id,this.commentText).then(i=>{f(this.post.id).then(t=>{this.comments=t.obj})})},reservePost(){L(this.post.id,this.store.id,this.time.substring(0,this.time.length-1)+":00",this.date,this.type).then(i=>{console.error("DOVRSI")})},refreshTimes(){console.log("------------------------"),M(this.post.id,this.date).then(i=>{this.availableTimes=this.baseAvailableTimes.filter(t=>!i.obj.includes(t)),this.availableTimes.length===0&&this.availableTimes.unshift("Nema slobodnih termina!"),this.time=this.availableTimes[0]})}}},m=i=>(C("data-v-3c7f7d8e"),i=i(),I(),i),Y={class:"container"},$=m(()=>e("div",{class:"large-whitespace"},null,-1)),ee={class:"post-container card"},te={class:"img-continer"},se={class:"carousel"},oe=["src"],ie={class:"info"},ne={class:"avatar"},le=["src"],ae={class:"title"},re=m(()=>e("hr",null,null,-1)),de={class:"more-info"},he=["href"],me=m(()=>e("hr",null,null,-1)),ce={class:"post-container"},ue={key:0,class:"reserve card"},_e=V("REZERVI\u0160I"),pe={key:1,class:"comment-form card"},ve=V("KOMENTARI\u0160I"),ge={class:"comments card"},fe=m(()=>e("h2",null,"Komentari",-1)),be={key:2,class:"title-reservations"},ye={key:3,class:"reservations"},Te=m(()=>e("thead",null,[e("tr",null,[e("th",null,"Ime korisnika"),e("th",null,"Tip rezervacije"),e("th",null,"Datum"),e("th",null,"Vreme")])],-1)),ke=m(()=>e("div",{class:"whitespace"},null,-1));function Ce(i,t,x,j,s,d){const F=h("CircleProgress"),A=h("Center"),_=h("IconButton"),p=h("ComboBox"),v=h("Button"),B=h("TextArea"),S=h("Comment");return l(),a("div",Y,[$,s.loadingAnimation?(l(),b(A,{key:0,class:"progress"},{default:u(()=>[r(F)]),_:1})):c("",!0),e("div",ee,[e("div",te,[e("div",se,[e("img",{src:s.image},null,8,oe)])]),e("div",ie,[e("div",ne,[e("img",{src:s.avatar},null,8,le)]),e("div",ae,[e("h1",null,n(this.post.name),1),e("h3",null,n(this.post.type),1)]),re,e("div",de,[e("div",null,[e("h3",null,"Kontakt: "+n(s.post.contact),1),e("h3",null,n(s.post.location)+", "+n(s.post.adress),1)]),e("div",null,[e("a",{target:"_blank",href:s.post.post_details[0].mapsLocation},[r(_,{borderless:"",name:"map-marker",class:"gps"})],8,he),r(_,{name:s.isFavorite?"star":"star-outline",text:"",borderless:"",onClick:d.toggleFavorite},null,8,["name","onClick"])])]),me,e("p",null,n(this.post.post_details[0].description),1)])]),e("div",ce,[this.store.userSide()?(l(),a("div",ue,[e("div",null,[e("label",null,"Tip rezervacije: "+n(this.type),1),r(p,{items:d.postTypes,modelValue:s.type,"onUpdate:modelValue":t[0]||(t[0]=o=>s.type=o),placeholder:"Tip"},null,8,["items","modelValue"])]),e("div",null,[e("label",null,"Datum rezervacije: "+n(this.date),1),Z(e("input",{type:"date",onChange:t[1]||(t[1]=(...o)=>d.refreshTimes&&d.refreshTimes(...o)),"onUpdate:modelValue":t[2]||(t[2]=o=>s.date=o)},null,544),[[q,s.date]])]),e("div",null,[e("label",null,"Vreme rezervacije: "+n(this.time),1),r(p,{items:s.availableTimes,modelValue:s.time,"onUpdate:modelValue":t[3]||(t[3]=o=>s.time=o),placeholder:"Vreme"},null,8,["items","modelValue"])]),r(v,{onClick:d.reservePost},{default:u(()=>[_e]),_:1},8,["onClick"])])):c("",!0),this.store.userSide()?(l(),a("div",pe,[r(B,{modelValue:s.commentText,"onUpdate:modelValue":t[4]||(t[4]=o=>s.commentText=o),rows:4,placeholder:"Komentar"},null,8,["modelValue"]),r(v,{onClick:d.createComment},{default:u(()=>[ve]),_:1},8,["onClick"])])):c("",!0),e("div",ge,[fe,(l(!0),a(y,null,T(this.comments,o=>(l(),b(S,{key:o.id,comment:o},null,8,["comment"]))),128))]),this.store.companySide()&&this.store.id===this.post.companyId?(l(),a("h1",be,"Rezervacije")):c("",!0),this.store.companySide()&&this.store.id===this.post.companyId?(l(),a("div",ye,[e("table",null,[Te,e("tbody",null,[(l(!0),a(y,null,T(this.reservations,o=>(l(),a("tr",{key:s.reservations.id},[e("td",null,n(o.users.username),1),e("td",null,n(o.type),1),e("td",null,n(o.date?o.date.slice(0,10):""),1),e("td",null,n(o.time),1)]))),128))])])])):c("",!0)]),ke])}var xe=k(X,[["render",Ce],["__scopeId","data-v-3c7f7d8e"]]);export{xe as default};
